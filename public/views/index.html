<!-- index.html -->
<!DOCTYPE HTML>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html lang="en" ng-app="directMailer">
<head>
	<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>Direct Mailer</title>

	<!-- SCROLLS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="/public/css/index.css">
	<!-- load bootstrap -->

	<!-- SPELLS -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/es5-shim/2.2.0/es5-sham.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular.min.js"></script>
	<script src="/lib/ngfileupload/angular-file-upload.min.js"></script>
	<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
	<script src="/public/js/app.js"></script>
	<script src="/public/js/services.js"></script>
	<script src="/public/js/controllers.js"></script>
	<script src="/public/js/directives.js"></script>

	<!-- jQuery -->
	<script src="/public/js/index.js"></script>
	
</head>

<!-- SET THE CONTROLLER AND GET ALL TODOS WITH INITIALIZE FUNCTION -->
<body ng-controller="mainController">
	<nav class="navbar navbar-default" role="navigation">
	  <!-- Brand and toggle get grouped for better mobile display -->
	  <div class="navbar-header">
	    <a class="navbar-brand" href="#">Direct Mailer</a>
	  </div>

	  <!-- Collect the nav links, forms, and other content for toggling -->
	  <div class="collapse navbar-collapse">
	    <ul class="nav navbar-nav navbar-right">
	      <li><a href="#">Link</a></li>
	    </ul>
	  </div><!-- /.navbar-collapse -->
	</nav>
	<div class="container">
		<div class="row">
			<div class="jumbotron">
			  <h1>Mail via the web</h1>
			  <p>Upload a .pdf and have it printed and sent to any address (international mailings will be charged an additional $1).</p>
			  <p><a class="btn btn-primary btn-lg" role="button">Learn more</a></p>
			</div>
		</div>
		<!-- 1. Upload your document or image or etc. -->
		<div class="row">
			<div class="page-header">
			  <h2>1. Upload your document</h2>
			</div>
			<div class="col-lg-6">
				<div class="form-group col-lg-12" ng-show="pdf.uploader.queue == 0">
					<div class="well drop-zone" ng-show="pdf.uploader.hasHTML5" ng-file-drop ng-file-over="ng-file-over-green">
						Drag your file here
					</div>
	      	<input id="filebutton" name="filebutton" class="input-file" type="file" required ng-file-select>
	      </div>
	      <div class="form-group col-lg-12">
			    <label class="radio">
			      <input type="radio" name="radios" value="100" checked="checked" ng-change="pdf.getId()" ng-model="pdf.settingId">
			      Black and white ($2)
			    </label>
			    <label class="radio">
			      <input type="radio" name="radios" value="101" ng-change="pdf.getId()" ng-model="pdf.settingId">
			      Color ($3)
			    </label>
				</div>
	    </div>
	    <div class="col-lg-6">
	    	<div class="form-group col-lg-12" >
	    		<table class="table">
	    			<thead>
	    				<tr>
	    					<th width="50%">Name</th>
	    					<th ng-show="pdf.uploader.hasHTML5">Size</th>
	    					<th ng-show="pdf.uploader.hasHTML5">Progress</th>
	    					<th>Remove</th>
	    				</tr>
	    			</thead>
	    			<tbody>
	    				<tr ng-show="pdf.uploader.queue == 0">
	    					<td><i><small>You haven't uploaded a file yet!</smalL></i></td>
	    					<td></td>
	    					<td></td>
	    					<td></td>
	    				</tr>
	    				<tr ng-repeat="item in pdf.uploader.queue">
	    					<td><strong>{{ item.file.name }}</strong></td>
	    					<td ng-show="pdf.uploader.hasHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>
	    					<td ng-show="pdf.uploader.hasHTML5">
	    						<div class="progress" style="margin-bottom: 0;">
	    							<div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
	    						</div>
	    					</td>
	    					<td nowrap>
	    						<button type="button" class="btn btn-danger btn-xs" ng-click="pdf.remove(item)">
	    							Remove
	    						</button>
	    					</td>
	    				</tr>
	    			</tbody>
	    		</table>
  				<div class="alert alert-danger" ng-show="pdf.isValid == false && pdf.isDirty">
						<small>{{pdf.err}}</small>
					</div>
  				<div class="alert alert-success" ng-show="pdf.isSaved">
						<small> Great, we got your information!</small>
					</div>
	    	</div>
	    </div>
	    <!-- TODO: Use Angular to provide a PDF preview when the pdf is uploaded. -->
	    <!-- TODO: Have a green check appear when this section is completed. -->
		</div>
		<!-- 2. Select your sender address -->
		<div class="row">
			<div class="page-header">
				<h2>2. Add Sender Address</h2>
			</div>
			<form class="col-lg-6 form-group" name="ngFromAddress">
			  <div class="form-group col-lg-12">
		    	<input type="text" placeholder="Name" class="form-control" name="fromAddressName" ng-model="fromAddress.name" required>
			  </div>
			  <div class="form-group col-lg-12">
			    <input type="text" placeholder="Street Address Line 1" class="form-control" name="fromAddressStreet1" ng-model="fromAddress.address_line1" required>
			  </div>
			  <div class="form-group col-lg-12">
			    <input type="text" placeholder="Street Address Line 2 (optional)" class="form-control" name="fromAddressStreet2" ng-model="fromAddress.address_line2">
			  </div>
			  <div class="form-group col-lg-6">
			    <input type="text" placeholder="City" class="form-control" name="fromAddressCity" ng-model="fromAddress.address_city" required>
			  </div>
			  <div class="form-group col-lg-3">
			    <input type="text" placeholder="State" class="form-control" name="fromAddressState" ng-model="fromAddress.address_state" required ng-minlength=2>
			  </div>
			  <div class="form-group col-lg-3">
			    <input type="number" placeholder="ZIP" class="form-control" name="fromAddressZip" ng-model="fromAddress.address_zip" ng-minlength=5 ng-maxlength=10 required ng-blur="validateFormAndPost(ngFromAddress, fromAddress, getAddressId)">
			  </div>
			</form>
			<div class="col-lg-6">
			  <div class="form-group col-lg-12" ng-show="fromAddress.isValid == false && fromAddress.isDirty">
					<div class="alert alert-danger">
						<small>{{fromAddress.err}}</small>
					</div>
				</div>
			  <div class="form-group col-lg-12" ng-show="fromAddress.isSaved == true">
					<div class="alert alert-success">
						<small> Great, we got your information!</small>
					</div>
				</div>
			</div>
			<!-- TODO: When City, State, and ZIP is added, then check for required fields on front end.
			Then, POST Address to backend. Respond with Success (green check). -->
		</div>
		<!-- 3. Select your recipients (individual or upload) -->
		<div class="row">
			<div class="page-header">
				<h2>3. Add Recipient Address</h2>
			</div>
			<form class="form-group col-lg-6" name="ngToAddress">
			  <div class="form-group col-lg-12">
		    	<input type="text" placeholder="Name" class="form-control" name="toAddressName" ng-model="toAddress.name" required>
			  </div>
			  <div class="form-group col-lg-12">
			    <input type="text" placeholder="Street Address Line 1" class="form-control" name="toAddressStreet1" ng-model="toAddress.address_line1" required>
			  </div>
			  <div class="form-group col-lg-12">
			    <input type="text" placeholder="Street Address Line 2 (optional)" class="form-control" name="toAddressStreet2" ng-model="toAddress.address_line2">
			  </div>
			  <div class="form-group col-lg-6">
			    <input type="text" placeholder="City" class="form-control" name="toAddressCity" ng-model="toAddress.address_city" required>
			  </div>
			  <div class="form-group col-lg-3">
			    <input type="text" placeholder="State" class="form-control" name="toAddressState" ng-model="toAddress.address_state" required>
			  </div>
			  <div class="form-group col-lg-3">
			    <input type="number" placeholder="ZIP" class="form-control" name="toAddressZip" ng-model="toAddress.address_zip" required ng-blur="validateFormAndPost(ngToAddress,toAddress,getAddressId)">
			  </div>
			  <br><hr>
			  <div class="form-group col-lg-12" ng-show="toAddress.isValid == false && toAddress.isDirty">
					<div class="alert alert-danger">
						<small>	Sorry, please fill in the required fields.</small>
					</div>
				</div>
			  <div class="form-group col-lg-12" ng-show="toAddress.isSaved == true">
					<div class="alert alert-success">
						<small> Great, we got the information!</small>
					</div>
				</div>
			</form>
		</div>

		<div class="row">
			<hr>
			<div class="col-lg-6 form-group">
				<h4>Sending to multiple contacts?</h4>
				<br>
				<div class="form-group col-lg-12">
					<div class="well drop-zone" ng-show="pdf.uploader.hasHTML5" ng-file-drop ng-file-over="ng-file-over-green">
						Drag here (or upload below) a CSV file with these headers: <i>"Name", "AddressLine1", "AddressLine2", "City", "State", "ZIP"</i>.
					</div>
					<input id="addressfile" name="toaddressbutton" class="input-file" type="file" ng-file-select>
				</div>
			</div>
		</div>
			<!-- TODO: Same as Step 2. -->
			<!-- TODO: Add Upload as CSV (need to figure out the best way to do this; email Lob?) -->
			<!-- TODO: Add address verification (figure out how the UI for this is) -->
		<!-- 4. Check out! Get your credit card. -->
		<div class="row">
			<div class="page-header">
				<h2>4. Check out and send</h2>
			</div>
			<!-- Dynamically generate a receipt here. -->
			
			<div class="col-lg-6">
				<table class="table">
					<thead>
						<tr>
							<th>Item</th>
							<th>Quantity</th>
							<th>Price</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>{{pdf.name}}</th>
							<th>2,000</th>
							<th>$800</th>
						</tr>
					</tbody>
				</table>
			</div>
				<!-- TODO: Dynamically update this based on Price. -->

			<form class="col-lg-6 dmStripeForm" name="ngCreditCard">
				<span class="payment-errors"></span>
			  <div class="form-group col-lg-12">
		    	<input type="number" name="number" placeholder="Card Number" class="form-control" data-stripe="number" required>
			  </div>
			  <div class="form-group col-lg-3">
		    	<input type="number" name="cvc" placeholder="CVC" class="form-control" data-stripe="cvc" required>
			  </div>
			  <div class="form-group col-lg-3">
		    	<input type="number" name="exp-month" ng-minlength=2 ng-maxlength=2 placeholder="MM" class="form-control" data-stripe="exp-month" required>
			  </div>
			  <div class="form-group col-lg-6">
		    	<input type="number" name="exp-year" ng-minlength=4 ng-maxlength=4 placeholder="YYYY" class="form-control" data-stripe="exp-year" required>
			  </div>
			  <div class="form-group col-lg-10">
  				<button type="button" class="btn btn-primary" ng-disable="">Pay and Send!</button>
  			</div>
  			<!-- After submitting, take to new page; send receipt email and page with registration
  			and tracking information. -->
			</form>
		</div>
		<!-- 5. Track your mail! Get email updates by signing up -->
		<div class="row">
		</div>
	</div>
</body>
</html>